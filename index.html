<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LM97CT6GBZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LM97CT6GBZ');
</script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Civic Unlock</title>
  <script src="https://cloud.google.com/ai/gen-app-builder/client?hl=en_US"></script>
  <style>
    :root {
      --primary-color: #00467f;
      --accent-color: #0077cc;
      --bg-light: linear-gradient(to bottom right, #f0f4f8, #ffffff);
      --bg-dark: linear-gradient(to bottom right, #1e1e1e, #2c2c2c);
      --text-light: #222;
      --text-dark: #4a90e2;
      --card-light: rgba(255, 255, 255, 0.9);
      --card-dark: rgba(40, 40, 40, 0.85);
      --border-light: #ccc;
      --border-dark: #444;
    }

    [data-theme="dark"] {
      --bg-gradient: var(--bg-dark);
      --text-color: var(--text-dark);
      --card-bg: var(--card-dark);
      --border-color: var(--border-dark);
    }

    [data-theme="light"] {
      --bg-gradient: var(--bg-light);
      --text-color: var(--text-light);
      --card-bg: var(--card-light);
      --border-color: var(--border-light);
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-gradient);
      color: var(--text-color);
      transition: background 0.3s ease, color 0.3s ease;
    }

    header {
      text-align: center;
      padding: 4vh 2rem 2rem;
      position: relative;
    }

    .branding {
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 0.25rem;
    }

    .subtitle {
      font-size: 1.3rem;
      font-weight: 400;
      margin-bottom: 1.5rem;
      color: inherit;
    }

    .tagline {
      max-width: 700px;
      margin: 0 auto 2.5rem;
      font-size: 1rem;
      line-height: 1.6;
    }

    .tagline a {
      color: var(--accent-color);
      text-decoration: underline;
    }

    .dark-toggle {
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      cursor: pointer;
      font-size: 1.4rem;
      background: none;
      border: none;
      color: var(--text-color);
      transition: color 0.3s ease;
    }

    .sample-queries {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.75rem;
      margin: 0 1rem 3rem;
    }

    .sample-queries button {
      padding: 0.5rem 1rem;
      border-radius: 999px;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.95rem;
      color: var(--text-color);
    }

    .sample-queries button:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .search-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0 1rem 4vh;
    }

    #searchWidgetTrigger {
      width: 100%;
      max-width: 90vw;
      padding: 1rem 1.2rem;
      font-size: 1.05rem;
      border-radius: 12px;
      border: 1px solid var(--border-color);
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      outline: none;
      color: var(--text-color);
      transition: border 0.2s ease, box-shadow 0.2s ease, background 0.3s ease, color 0.3s ease;
    }

    #searchWidgetTrigger:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 8px rgba(0, 119, 204, 0.25);
    }

    @media (max-width: 600px) {
      .branding {
        font-size: 2rem;
      }

      .subtitle {
        font-size: 1.1rem;
      }

      .tagline {
        font-size: 0.95rem;
      }

      #searchWidgetTrigger {
        font-size: 1rem;
        padding: 0.9rem 1rem;
      }
    }

    footer {
      text-align: center;
      padding: 2rem 1rem;
      font-size: 0.85rem;
      color: var(--text-color);
    }
  </style>
</head>
<body>
  <header>
    <button class="dark-toggle" aria-label="Toggle Dark Mode" onclick="toggleDarkMode()">üåô</button>
    <h1 class="branding">Civic<span style="color: var(--accent-color)">Unlock</span></h1>
    <h2 class="subtitle">City of Whitehorse Edition</h2>
    <p class="tagline">
      Ask questions based on official City Council Agendas, Minutes, and Reports.<br />
      Get reliable answers with citations from:<br />
      <a href="https://www.whitehorse.ca/our-government/city-council/meetings/agendas-minutes-and-reports/" target="_blank">
        whitehorse.ca/city-council/meetings
      </a>
    </p>
  </header>

  <div class="search-container">
    <input
      placeholder="Ask about city council actions‚Ä¶"
      id="searchWidgetTrigger"
      aria-label="Search civic documents"
    />
  </div>

  <gen-search-widget
    configId="c6d6616c-c71f-4f1b-b5af-9344fcd18aa9"
    triggerId="searchWidgetTrigger">
  </gen-search-widget>

  <footer>
    Powered by Google Vertex AI Search ¬∑ Built for the residents of Whitehorse
  </footer>

  <script>
    const placeholderTexts = [
      "Were there any discussions about new housing developments in the Whistle Bend area?",
      "Has the City received any public feedback on housing affordability in recent meetings?",
      "What infrastructure projects were approved to improve sustainability or climate resilience?",
      "What major land use changes were approved in the 2024 planning cycle?",
      "Did Council discuss any transportation upgrades or roadworks for 2025?",
      "Was a housing grant discussed for residents in 2025?"
    ];

    let index = 0;
    setInterval(() => {
      const input = document.getElementById('searchWidgetTrigger');
      if (input) {
        input.setAttribute('placeholder', placeholderTexts[index]);
        index = (index + 1) % placeholderTexts.length;
      }
    }, 4000);

    const resizeWidgetIfReady = () => {
      const widget = document.querySelector('gen-search-widget');
      if (!widget?.shadowRoot) return;
      const resize = () => {
        const container = widget.shadowRoot.querySelector('cag-search');
        if (container) {
          container.style.width = '100%';
          container.style.maxWidth = '100vw';
          container.style.padding = '0 1rem';
        }
        const inner = widget.shadowRoot.querySelector('.dialog, .container');
        if (inner) inner.style.maxWidth = '100%';
      };
      resize();
      const observer = new MutationObserver(resize);
      observer.observe(widget.shadowRoot, { childList: true, subtree: true });
    };

    window.addEventListener('load', () => {
      const poll = setInterval(() => {
        const widget = document.querySelector('gen-search-widget');
        if (widget && widget.shadowRoot) {
          clearInterval(poll);
          resizeWidgetIfReady();
        }
      }, 200);
    });

    function toggleDarkMode() {
      const html = document.documentElement;
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem('civic-theme', next);
      document.querySelector('.dark-toggle').textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }

    // Persist dark mode preference
    const savedTheme = localStorage.getItem('civic-theme');
    if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
      document.querySelector('.dark-toggle').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }
  </script>
</body>
</html>
